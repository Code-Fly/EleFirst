$(document).ready(function () {
    DateBoxUtils.initMonthBox($("#startdate"));
    //初始化databox为当前日期
    var d = new Date();
    var dateboxDate = d.getFullYear() + "-" + (d.getMonth() + 1) + "-01";
    $("#startdate").datebox("clear");
    $("#startdate").datebox("setValue", "2017-06");
    var dgtt2 = $("#tt2").datagrid({
        // url: _ctx + 'report/electricity/daily/list.do',
        // queryParams: {
        //     date: $("#startdate").datebox("getValue")
        // },
        pagination: true,
        rownumbers: true,
        pageSize: DEFAULT_PAGE_SIZE,
        pageList: DEFAULT_PAGE_LIST,
        pageNumber: 1,
        singleSelect: true,
        fit: true,
        loadMsg: "正在加载...",
        border: false,
        data: [{
            name: "1-1",
            total: "5128",
            p01: "102",
            p02: "106",
            p03: "107",
            p04: "108",
            p05: "109",
            p06: "111",
            p07: "112",
            p08: "116",
            p09: "117",
            p10: "118",
            p11: "121",
            p12: "126",
            p13: "127",
            p14: "128",
            p15: "129",
            p16: "131",
            p17: "132",
            p18: "134",
            p19: "135",
            p20: "136",
            p21: "137",
            p22: "138",
            p23: "139",
            p24: "151",
            p25: "152",
            p26: "153",
            p27: "154",
            p28: "155",
            p29: "157",
            p30: "158",
            p31: "161"
        }, {
            name: "1-2",
            total: "6122",
            p01: "202",
            p02: "203",
            p03: "206",
            p04: "208",
            p05: "209",
            p06: "210",
            p07: "211",
            p08: "213",
            p09: "216",
            p10: "218",
            p11: "219",
            p12: "221",
            p13: "226",
            p14: "227",
            p15: "229",
            p16: "231",
            p17: "234",
            p18: "235",
            p19: "237",
            p20: "239",
            p21: "245",
            p22: "248",
            p23: "251",
            p24: "252",
            p25: "253",
            p26: "257",
            p27: "259",
            p28: "261",
            p29: "271",
            p30: "276",
            p31: "281"
        }, {
            name: "1-3",
            total: "26101",
            p01: "802",
            p02: "803",
            p03: "805",
            p04: "806",
            p05: "808",
            p06: "810",
            p07: "812",
            p08: "816",
            p09: "817",
            p10: "818",
            p11: "822",
            p12: "825",
            p13: "826",
            p14: "827",
            p15: "828",
            p16: "829",
            p17: "832",
            p18: "833",
            p19: "835",
            p20: "836",
            p21: "837",
            p22: "839",
            p23: "842",
            p24: "845",
            p25: "849",
            p26: "852",
            p27: "855",
            p28: "857",
            p29: "858",
            p30: "861",
            p31: "862"
        }, {
            name: "1-4",
            total: "5128",
            p01: "102",
            p02: "106",
            p03: "107",
            p04: "108",
            p05: "109",
            p06: "111",
            p07: "112",
            p08: "116",
            p09: "117",
            p10: "118",
            p11: "121",
            p12: "126",
            p13: "127",
            p14: "128",
            p15: "129",
            p16: "131",
            p17: "132",
            p18: "134",
            p19: "135",
            p20: "136",
            p21: "137",
            p22: "138",
            p23: "139",
            p24: "151",
            p25: "152",
            p26: "153",
            p27: "154",
            p28: "155",
            p29: "157",
            p30: "158",
            p31: "161"
        }, {
            name: "1-5",
            total: "6122",
            p01: "202",
            p02: "203",
            p03: "206",
            p04: "208",
            p05: "209",
            p06: "210",
            p07: "211",
            p08: "213",
            p09: "216",
            p10: "218",
            p11: "220",
            p12: "221",
            p13: "226",
            p14: "227",
            p15: "229",
            p16: "231",
            p17: "234",
            p18: "235",
            p19: "237",
            p20: "239",
            p21: "245",
            p22: "248",
            p23: "251",
            p24: "252",
            p25: "253",
            p26: "256",
            p27: "259",
            p28: "261",
            p29: "271",
            p30: "276",
            p31: "291"
        }, {
            name: "1-6",
            total: "19678",
            p01: "602",
            p02: "603",
            p03: "604",
            p04: "605",
            p05: "608",
            p06: "609",
            p07: "611",
            p08: "613",
            p09: "616",
            p10: "618",
            p11: "621",
            p12: "622",
            p13: "626",
            p14: "627",
            p15: "628",
            p16: "631",
            p17: "632",
            p18: "634",
            p19: "636",
            p20: "637",
            p21: "639",
            p22: "641",
            p23: "645",
            p24: "649",
            p25: "651",
            p26: "653",
            p27: "655",
            p28: "658",
            p29: "659",
            p30: "661",
            p31: "662"
        }, {
            name: "1-7",
            total: "1651",
            p01: "12",
            p02: "16",
            p03: "17",
            p04: "19",
            p05: "21",
            p06: "22",
            p07: "26",
            p08: "27",
            p09: "28",
            p10: "31",
            p11: "34",
            p12: "35",
            p13: "41",
            p14: "44",
            p15: "48",
            p16: "51",
            p17: "52",
            p18: "53",
            p19: "54",
            p20: "57",
            p21: "58",
            p22: "59",
            p23: "63",
            p24: "65",
            p25: "66",
            p26: "67",
            p27: "68",
            p28: "71",
            p29: "72",
            p30: "75",
            p31: "79"
        }, {
            name: "1-8",
            total: "36281",
            p01: "1102",
            p02: "1106",
            p03: "1107",
            p04: "1108",
            p05: "1109",
            p06: "1111",
            p07: "1112",
            p08: "1116",
            p09: "1117",
            p10: "1118",
            p11: "1121",
            p12: "1126",
            p13: "1127",
            p14: "1128",
            p15: "1129",
            p16: "1131",
            p17: "1132",
            p18: "1134",
            p19: "1135",
            p20: "1136",
            p21: "1137",
            p22: "1138",
            p23: "1139",
            p24: "1151",
            p25: "1152",
            p26: "1153",
            p27: "1154",
            p28: "1155",
            p29: "1157",
            p30: "1158",
            p31: "1161"
        }, {
            name: "1-9",
            total: "912",
            p01: "11",
            p02: "12",
            p03: "13",
            p04: "14",
            p05: "15",
            p06: "17",
            p07: "19",
            p08: "21",
            p09: "23",
            p10: "28",
            p11: "31",
            p12: "34",
            p13: "35",
            p14: "37",
            p15: "39",
            p16: "41",
            p17: "43",
            p18: "45",
            p19: "47",
            p20: "49",
            p21: "51",
            p22: "52",
            p23: "53",
            p24: "54",
            p25: "56",
            p26: "58",
            p27: "61",
            p28: "62",
            p29: "66",
            p30: "68",
            p31: "69"
        }, {
            name: "1-10",
            total: "6169",
            p01: "202",
            p02: "206",
            p03: "208",
            p04: "211",
            p05: "216",
            p06: "219",
            p07: "221",
            p08: "226",
            p09: "227",
            p10: "229",
            p11: "231",
            p12: "234",
            p13: "235",
            p14: "236",
            p15: "238",
            p16: "241",
            p17: "245",
            p18: "248",
            p19: "251",
            p20: "252",
            p21: "253",
            p22: "255",
            p23: "257",
            p24: "259",
            p25: "261",
            p26: "266",
            p27: "269",
            p28: "271",
            p29: "276",
            p30: "281",
            p31: "288"
        }],
        onLoadError: function () {
            jError("查询日电量信息失败", {
                VerticalPosition: 'center',
                HorizontalPosition: 'center',
                ShowOverlay: false
            });
        }
    });

    $("#btn-detail-search").linkbutton({
        onClick: function () {
            if (!$("#startdate").datebox("isValid")) {
                $.messager.alert("信息提示", "请选择时间！", "info");
                return;
            }
            dgtt2.datagrid('load', {
                date: $("#startdate").datebox("getValue")
            });
        }
    });

    $("#exportexcel").linkbutton({
        onClick: function () {
            window.location.href = _ctx + "view/report/dailyelectricity/report20170703204120.xls";
        }
    });

    //刷新页面
    function refreshClick() {
        window.location.reload();
    }
});

